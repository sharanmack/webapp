<!-- carlist.component.html -->

<app-navbar></app-navbar>
<div class="container mt-4">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <div class="filter-container">
    <div class="filter-item">
      <label for="filterType">Filter by:</label>
      <select id="filterType" [(ngModel)]="selectedFilter" (change)="updateFilter()" class="filter-input">
        <option value="carName">Car Name</option>
        <option value="model">Model</option>
        <option value="price">Price</option>
        <option value="kilometer">Kilometer</option>
      </select>
    </div>
  
    <div class="filter-item" *ngIf="selectedFilter === 'carName'">
      <label>Filter by Car Name:</label>
      <input type="text" [(ngModel)]="searchText" placeholder="Search..." (input)="updateFilter()" class="filter-input">
    </div>
  
    <div class="filter-item" *ngIf="selectedFilter === 'model'">
      <label for="modelFilter">Filter by Model:</label>
      <input type="text" id="modelFilter" [(ngModel)]="modelFilter" (input)="updateFilter()" class="filter-input">
    </div>
  
    <div class="filter-item" *ngIf="selectedFilter === 'price'">
      <label for="priceFilter">Filter by Price:</label>
      <input type="number" id="priceFilter" [(ngModel)]="priceFilter" (input)="updateFilter()" class="filter-input">
    </div>
  
    <div class="filter-item" *ngIf="selectedFilter === 'kilometer'">
      <label for="kilometerFilter">Filter by Kilometer:</label>
      <input type="number" id="kilometerFilter" [(ngModel)]="kilometerFilter" (input)="updateFilter()" class="filter-input">
    </div>
  </div>


  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>Image</th>
        <th>Contact Details</th>
        <th>Brand</th>
        <th>Car Name</th>
        <th>Car Model</th>
        <th>Fuel Type</th>
        <th>Car Kilometre</th>
        <th>Car Price</th>
        <th>Car Details</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let car of filteredCarsData">
        <td>
          <div *ngIf="car.images && car.images.length > 0">
            <div class="carousel slide" [attr.id]="'carouselExample' + car.id" data-ride="carousel">
              <ol class="carousel-indicators">
                <li *ngFor="let image of car.images; let i = index"
                    [attr.data-target]="'#carouselExample' + car.id"
                    [attr.data-slide-to]="i"
                    [ngClass]="{ 'active': i === 0 }"></li>
              </ol>
              <div class="carousel-inner">
                <div *ngFor="let image of car.images; let i = index" class="carousel-item" [ngClass]="{ 'active': i === 0 }">
                  <img
                    [src]="'http://localhost:3000/uploads/' + image.filename"
                    alt="{{ car.carName }}"
                    class="img-thumbnail d-block w-100"
                    (click)="toggleImageSize(car)"
                    [ngClass]="{ 'enlarge-image': car.enlargeImage }"
                  />
                </div>
              </div>
            </div>
          </div>
        </td>
        
        <td>{{ car.email }}</td>
        <td>{{ car.brand }}</td>
        <td>{{ car.carName }}</td>
        <td>{{ car.carModel }}</td>
        <td>{{ car.fuelType }}</td>
        <td>{{ car.carkilometre }}</td>
        <td>{{ car.carPrice }}</td>
        <td>{{ car.contactDetails }}</td>
        <td>
         
          <button class="btn btn-danger ms-1" (click)="confirmDelete(car)">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
